<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebOS</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            user-select: none;
            cursor: default;
        }

        .window {
            z-index: 100;
        }

        .window-header {
            cursor: move;
        }
        .window:hover {
            z-index: 200;
        }

        .icon:hover {
            transform: scale(1.05);
        }

        .desktop-background {
            background-color: #1a1a1a;
            background-image:
                radial-gradient(ellipse at center, #2e2e2e 0%, #1a1a1a 100%);
        }

        .shadow-glow {
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);
        }

        .taskbar-item.active {
            background-color: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 h-screen flex flex-col">

    <!-- Desktop Area -->
    <div id="desktop" class="desktop-background flex-grow relative overflow-hidden flex flex-wrap content-start p-4">

        <!-- Icon: Terminal -->
        <div id="terminal-icon" class="icon flex flex-col items-center p-3 m-2 rounded-lg hover:bg-gray-800 transition-transform cursor-pointer">
            <svg class="w-12 h-12 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c0 1.657-1.5 3-3 3s-3-1.343-3-3m0 0a3 3 0 013-3 3 3 0 013 3m0 0H6m-6 0h6m0 0v-3a3 3 0 013-3 3 3 0 013 3v3m0 0v-3a3 3 0 013-3 3 3 0 013 3v3m0 0H18"></path>
            </svg>
            <span class="text-xs mt-2 text-center text-gray-300">Terminal</span>
        </div>

        <!-- Icon: Text Editor -->
        <div id="editor-icon" class="icon flex flex-col items-center p-3 m-2 rounded-lg hover:bg-gray-800 transition-transform cursor-pointer">
            <svg class="w-12 h-12 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
            <span class="text-xs mt-2 text-center text-gray-300">Text Editor</span>
        </div>

        <!-- Icon: Calculator -->
        <div id="calculator-icon" class="icon flex flex-col items-center p-3 m-2 rounded-lg hover:bg-gray-800 transition-transform cursor-pointer">
            <svg class="w-12 h-12 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m-3 3v6m0 0a2 2 0 110 4 2 2 0 010-4zm0 0v-3"></path>
            </svg>
            <span class="text-xs mt-2 text-center text-gray-300">Calculator</span>
        </div>

        <!-- Window Templates -->
        <!-- Terminal Window -->
        <div id="terminal-window" class="window absolute hidden w-full sm:w-2/3 lg:w-1/2 h-1/2 top-1/4 left-1/4 flex flex-col bg-gray-800 rounded-xl shadow-lg shadow-glow overflow-hidden resize">
            <div class="window-header flex justify-between items-center p-2 bg-gray-900 border-b border-gray-700 rounded-t-xl">
                <span class="text-sm font-semibold text-gray-300">Terminal</span>
                <div class="flex space-x-2">
                    <button class="window-minimize w-3 h-3 bg-yellow-400 rounded-full hover:bg-yellow-500"></button>
                    <button class="window-maximize w-3 h-3 bg-green-400 rounded-full hover:bg-green-500"></button>
                    <button class="window-close w-3 h-3 bg-red-400 rounded-full hover:bg-red-500"></button>
                </div>
            </div>
            <div class="flex-grow p-4 overflow-auto font-mono text-sm">
                <pre class="text-green-400">Welcome to WebOS!</pre>
                <pre class="text-gray-400">Type 'help' for a list of commands.</pre>
                <div class="flex items-center mt-2">
                    <span class="text-green-400">guest@webos:~$</span>
                    <input type="text" class="flex-grow ml-2 bg-transparent outline-none text-white caret-green-400">
                </div>
            </div>
        </div>

        <!-- Text Editor Window -->
        <div id="editor-window" class="window absolute hidden w-full sm:w-2/3 lg:w-1/2 h-1/2 top-1/4 left-1/4 flex flex-col bg-gray-800 rounded-xl shadow-lg shadow-glow overflow-hidden resize">
            <div class="window-header flex justify-between items-center p-2 bg-gray-900 border-b border-gray-700 rounded-t-xl">
                <span class="text-sm font-semibold text-gray-300">Text Editor</span>
                <div class="flex space-x-2">
                    <button class="window-minimize w-3 h-3 bg-yellow-400 rounded-full hover:bg-yellow-500"></button>
                    <button class="window-maximize w-3 h-3 bg-green-400 rounded-full hover:bg-green-500"></button>
                    <button class="window-close w-3 h-3 bg-red-400 rounded-full hover:bg-red-500"></button>
                </div>
            </div>
            <textarea class="flex-grow p-4 bg-gray-900 text-white outline-none resize-none"></textarea>
        </div>

        <!-- Calculator Window -->
        <div id="calculator-window" class="window absolute hidden w-72 h-auto top-1/4 left-1/4 flex flex-col bg-gray-800 rounded-xl shadow-lg shadow-glow overflow-hidden">
            <div class="window-header flex justify-between items-center p-2 bg-gray-900 border-b border-gray-700 rounded-t-xl">
                <span class="text-sm font-semibold text-gray-300">Calculator</span>
                <div class="flex space-x-2">
                    <button class="window-minimize w-3 h-3 bg-yellow-400 rounded-full hover:bg-yellow-500"></button>
                    <button class="window-maximize w-3 h-3 bg-green-400 rounded-full hover:bg-green-500"></button>
                    <button class="window-close w-3 h-3 bg-red-400 rounded-full hover:bg-red-500"></button>
                </div>
            </div>
            <div class="p-4 bg-gray-900 flex flex-col">
                <input id="calc-display" type="text" class="w-full text-right bg-gray-700 text-white rounded-md p-2 text-xl mb-4" value="0" readonly>
                <div class="grid grid-cols-4 gap-2">
                    <button class="calc-btn col-span-2 bg-gray-700 text-white py-2 rounded-full hover:bg-gray-600 transition">AC</button>
                    <button class="calc-btn bg-gray-700 text-white py-2 rounded-full hover:bg-gray-600 transition">+/-</button>
                    <button class="calc-btn bg-orange-500 text-white py-2 rounded-full hover:bg-orange-600 transition">/</button>
                    <button class="calc-btn bg-gray-700 text-white py-2 rounded-full hover:bg-gray-600 transition">7</button>
                    <button class="calc-btn bg-gray-700 text-white py-2 rounded-full hover:bg-gray-600 transition">8</button>
                    <button class="calc-btn bg-gray-700 text-white py-2 rounded-full hover:bg-gray-600 transition">9</button>
                    <button class="calc-btn bg-orange-500 text-white py-2 rounded-full hover:bg-orange-600 transition">*</button>
                    <button class="calc-btn bg-gray-700 text-white py-2 rounded-full hover:bg-gray-600 transition">4</button>
                    <button class="calc-btn bg-gray-700 text-white py-2 rounded-full hover:bg-gray-600 transition">5</button>
                    <button class="calc-btn bg-gray-700 text-white py-2 rounded-full hover:bg-gray-600 transition">6</button>
                    <button class="calc-btn bg-orange-500 text-white py-2 rounded-full hover:bg-orange-600 transition">-</button>
                    <button class="calc-btn bg-gray-700 text-white py-2 rounded-full hover:bg-gray-600 transition">1</button>
                    <button class="calc-btn bg-gray-700 text-white py-2 rounded-full hover:bg-gray-600 transition">2</button>
                    <button class="calc-btn bg-gray-700 text-white py-2 rounded-full hover:bg-gray-600 transition">3</button>
                    <button class="calc-btn bg-orange-500 text-white py-2 rounded-full hover:bg-orange-600 transition">+</button>
                    <button class="calc-btn col-span-2 bg-gray-700 text-white py-2 rounded-full hover:bg-gray-600 transition">0</button>
                    <button class="calc-btn bg-gray-700 text-white py-2 rounded-full hover:bg-gray-600 transition">.</button>
                    <button class="calc-btn bg-orange-500 text-white py-2 rounded-full hover:bg-orange-600 transition">=</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Taskbar -->
    <div id="taskbar" class="flex-shrink-0 bg-gray-900 border-t border-gray-700 p-2 flex justify-center space-x-2">
        <!-- Taskbar icons will be added here dynamically -->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const desktop = document.getElementById('desktop');
            const taskbar = document.getElementById('taskbar');
            let zIndexCounter = 100;

            // Define applications and their properties
            const apps = {
                'terminal': {
                    icon: 'terminal-icon',
                    window: 'terminal-window',
                    taskbarIcon: 'text-blue-400'
                },
                'editor': {
                    icon: 'editor-icon',
                    window: 'editor-window',
                    taskbarIcon: 'text-yellow-400'
                },
                'calculator': {
                    icon: 'calculator-icon',
                    window: 'calculator-window',
                    taskbarIcon: 'text-purple-400'
                }
            };

            // Event listener for opening windows from icons
            Object.values(apps).forEach(app => {
                const icon = document.getElementById(app.icon);
                if (icon) {
                    icon.addEventListener('click', () => openWindow(app.window));
                }
            });

            // Handle window actions (close, minimize, maximize) and dragging
            desktop.addEventListener('click', (e) => {
                const target = e.target;
                const windowElement = target.closest('.window');

                if (windowElement) {
                    // Bring the clicked window to the front
                    bringToFront(windowElement);

                    // Handle window controls
                    if (target.classList.contains('window-close')) {
                        closeWindow(windowElement);
                    } else if (target.classList.contains('window-minimize')) {
                        minimizeWindow(windowElement);
                    } else if (target.classList.contains('window-maximize')) {
                        maximizeWindow(windowElement);
                    }
                }
            });

            // Window Management Functions
            function openWindow(windowId) {
                const windowElement = document.getElementById(windowId);
                const appName = Object.keys(apps).find(key => apps[key].window === windowId);

                if (windowElement.classList.contains('minimized')) {
                    // Restore from minimized state
                    windowElement.classList.remove('minimized', 'hidden');
                    windowElement.style.display = 'flex';
                } else if (windowElement.style.display === 'flex') {
                    // If already open, bring to front
                    bringToFront(windowElement);
                } else {
                    // Open and create taskbar item
                    windowElement.style.display = 'flex';
                    windowElement.classList.remove('hidden');
                    bringToFront(windowElement);
                    createTaskbarItem(appName);
                }
            }

            function closeWindow(windowElement) {
                const windowId = windowElement.id;
                const appName = Object.keys(apps).find(key => apps[key].window === windowId);

                windowElement.style.display = 'none';
                windowElement.classList.add('hidden');
                removeTaskbarItem(appName);
            }

            function minimizeWindow(windowElement) {
                windowElement.classList.add('minimized', 'hidden');
            }

            function maximizeWindow(windowElement) {
                if (windowElement.classList.contains('maximized')) {
                    windowElement.classList.remove('maximized');
                    windowElement.style.width = '50%';
                    windowElement.style.height = '50%';
                    windowElement.style.top = '25%';
                    windowElement.style.left = '25%';
                } else {
                    windowElement.classList.add('maximized');
                    windowElement.style.width = '100%';
                    windowElement.style.height = '100%';
                    windowElement.style.top = '0';
                    windowElement.style.left = '0';
                }
            }

            function bringToFront(windowElement) {
                zIndexCounter++;
                windowElement.style.zIndex = zIndexCounter;

                // Update taskbar item to active state
                const appName = Object.keys(apps).find(key => apps[key].window === windowElement.id);
                document.querySelectorAll('.taskbar-item').forEach(item => {
                    item.classList.remove('active');
                });
                const taskbarItem = document.getElementById(`taskbar-item-${appName}`);
                if (taskbarItem) {
                    taskbarItem.classList.add('active');
                }
            }

            // Taskbar Functions
            function createTaskbarItem(appName) {
                const existingItem = document.getElementById(`taskbar-item-${appName}`);
                if (existingItem) return;

                const app = apps[appName];
                const taskbarItem = document.createElement('div');
                taskbarItem.id = `taskbar-item-${appName}`;
                taskbarItem.className = `taskbar-item flex items-center justify-center w-12 h-10 rounded-md transition hover:bg-gray-800 cursor-pointer ${app.taskbarIcon}`;
                taskbarItem.innerHTML = desktop.querySelector(`#${app.icon} svg`).outerHTML;
                taskbarItem.addEventListener('click', () => {
                    const windowElement = document.getElementById(app.window);
                    if (windowElement.classList.contains('hidden')) {
                        openWindow(app.window);
                    } else {
                        bringToFront(windowElement);
                    }
                });
                taskbar.appendChild(taskbarItem);
                bringToFront(document.getElementById(app.window)); // Set active state
            }

            function removeTaskbarItem(appName) {
                const taskbarItem = document.getElementById(`taskbar-item-${appName}`);
                if (taskbarItem) {
                    taskbar.removeChild(taskbarItem);
                }
            }

            // Draggable Window Logic
            let activeWindow = null;
            let initialX = 0;
            let initialY = 0;
            let xOffset = 0;
            let yOffset = 0;

            desktop.addEventListener('mousedown', (e) => {
                const header = e.target.closest('.window-header');
                if (header) {
                    e.preventDefault();
                    activeWindow = header.parentElement;
                    initialX = e.clientX - activeWindow.offsetLeft;
                    initialY = e.clientY - activeWindow.offsetTop;
                    bringToFront(activeWindow);
                }
            });

            desktop.addEventListener('mouseup', () => {
                activeWindow = null;
            });

            desktop.addEventListener('mousemove', (e) => {
                if (!activeWindow) return;
                e.preventDefault();

                xOffset = e.clientX - initialX;
                yOffset = e.clientY - initialY;

                activeWindow.style.left = `${xOffset}px`;
                activeWindow.style.top = `${yOffset}px`;
            });

            // Calculator Logic
            const calcDisplay = document.getElementById('calc-display');
            document.querySelectorAll('#calculator-window .calc-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const value = e.target.innerText;
                    if (value === 'AC') {
                        calcDisplay.value = '0';
                    } else if (value === '=') {
                        try {
                            calcDisplay.value = eval(calcDisplay.value.replace('×', '*').replace('÷', '/'));
                        } catch {
                            calcDisplay.value = 'Error';
                        }
                    } else {
                        if (calcDisplay.value === '0') {
                            calcDisplay.value = value;
                        } else {
                            calcDisplay.value += value;
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>
